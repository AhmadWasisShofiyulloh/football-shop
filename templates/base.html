{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    {% block meta %}
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    {% endblock meta %}
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="{% static 'css/global.css' %}"/>
</head>

<body>
    {% block content %} {% endblock content %}
    {% block scripts %}
            {% include 'toast.html' %}
            {% include 'modal.html' %}
            <script>
            const logoutButtons = document.querySelectorAll('.logout-btn');

            // Event listener logout button
            logoutButtons.forEach(button => {
                button.addEventListener('click', async function(e) {
                    e.preventDefault(); 

                    const response = await fetch("{% url 'main:logout_ajax' %}", {
                        method: "POST",
                    });
                    
                    const result = await response.json();

                    if (result.status === 'success') {
                        showToast("Success", result.message, "success");
                        setTimeout(() => {
                            window.location.href = "{% url 'main:login' %}";
                        }, 1500);
                    } else {
                        showToast("Error", "Logout failed.", "error");
                    }
                });
            });
        </script>
        {% endblock scripts %}
</body>
</html>